VERSION 1
TOKEN "endpoint_stats_over_24h" READ

NODE endpoint_stats_24h_0
SQL >

    %
    SELECT
        COUNT(*) as count,
        min(latency) as min,
        max(latency) as max,
        quantile(0.5)(latency) as p50,
        quantile(0.95)(latency) as p95,
        quantile(0.99)(latency) as p99
    FROM checks
    WHERE

        endpointId = {{String(endpointId, required=True, default="ept_PjTTAwPFjzU99osLmzGAwM")}}
    AND
        time >= now() - INTERVAL 1 DAY



