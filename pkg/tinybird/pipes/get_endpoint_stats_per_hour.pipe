VERSION 1
TOKEN "live" READ

NODE filter
SQL >
    %
SELECT
    regionId,
    time,
    quantileTimingMerge(0.5)(p50) AS p50,
    quantileTimingMerge(0.95)(p95) AS p95,
    quantileTimingMerge(0.99)(p99) AS p99
FROM endpoint_stats_per_hour__v1
WHERE
    endpointId ={{ String(endpointId, required=True) }} AND fromUnixTimestamp64Milli(time) >= now() - INTERVAL {{ Int32(days, 7) }} DAY
GROUP BY regionId, time